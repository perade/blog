<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155704951-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-155704951-1');
    </script>
    
    <title>Home | perade</title><meta name="gridsome:hash" content="843e47f385d56c2b19388c4509fc534a1d06489c"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Slowly, but steadily"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/blog/assets/static/favicon.ce0531f.02c7a28478250793f4f56eb605c74a33.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/blog/assets/static/favicon.ac8d93a.02c7a28478250793f4f56eb605c74a33.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/blog/assets/static/favicon.b9532cc.02c7a28478250793f4f56eb605c74a33.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/blog/assets/static/favicon.f22e9f3.02c7a28478250793f4f56eb605c74a33.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nanum+Gothic:400,700,800&amp;display=swap&amp;subset=korean"><link rel="preload" href="/blog/assets/css/0.styles.d9a4cdc1.css" as="style"><link rel="preload" href="/blog/assets/js/app.11cf6a80.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-tag-vue.b2eea100.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.78d9cc21.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.4845d9ff.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-post-vue.1ab9b8d0.js"><link rel="prefetch" href="/blog/assets/js/vendors~page--src-templates-post-vue.4a5f8fb0.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.d9a4cdc1.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← Home
  </span></a></div><div class="header__right"><div class="toggle"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><img alt="Github image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 22 22' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cimage x='0' y='0' width='22' height='22' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAALmElEQVR42s1be8wcVRXf3e9TKWBBmXv3%2b5SPR0UtMbExxL%2bqWFAQEaqQpqDhD4iIJmIUMRpoo2CU8IjG%2bIhWbQKGBoIBeRQSY2nByCPQ%2bIomEqFAFCtB%2b%2bDdfcz6OzPn3Dn3fndnZ7/9%2bu1ucjKzM3PvnHPuOeee19RqI/yaiak1DYHN/xtbB0w1E1v3nsN1m5hZwAdx/inAF/HMBhy/yXAl4AuA86wxq3Fsypx6Dprbmnxuui%2bw5D96qU1sRrxDLrFTPnPsCbh%2bMWAzGPVXHF8CA7o49mZsMwp0D0DPvAj4M%2bbYhDEX4vz44P1TTccI4/BZMuLDFVf3LJC%2bBMftgJcDwjSBbSDcahIYAkPHNt9zz6rxxJDf4PmLcHyLkkDFiCWQBkV4DaLqCMcqHY9r3wX8J0OaCcD1tiIsBdFpdjQmOypi3XWMkXtdHtvOmGEcM/4F%2bA7g7Z5EJMbDcVF/lnSdX4BzrLpp8MuOxPl1JN5qpYGw6VgmOrvGhAeSUAbueWYKzdVxzMjftQfXr8LxMFaFxkGRhly/HHe1uJ8P%2bKdPuCJ6OIIrMaOZS0c3YMSTgLVaGtyijcoEPQHOp/m4HHCzEvOW0t10EQkvZwbeaXMbIvc2AQ5haZjSO9XI%2bk7Ghi37ewFPEOdBeIdgiQgvUZFMNbosDX8CvDMiraMTD2LPxP9XGIFWIOpLSTyDZ0jp2CJDSbYBi3RyhrOWhKpM8IhnLmLC9e7FSa5/4yM8KgmpWhixRx8b2iaIZ6cH4niuIr4zQcQHjDCpXiDeOU7zmDBod1CrL8SfrAycJr7H%2b3WHocv/DyZzQpHnrTGzQ27L5CNLqXkVx/d5NPUzikI8CGmw/hwLbr6gRKoX03vWO1kF8gEWeyvUDJctMFXbYE8xX79TcH4WYJjGRtQeuJVP3BG%2bvfk9W/tWH30jC/wwub04PqMR0kiy9%2bePT9jrA7NYVHNPsPACfQZm1007eMcuwDbA4/78hXEk3Pn5%2b3hRHY2K%2bOKiLUT/WzywFUG%2by8TvUqpyOOBUm%2b/F%2b4qVyXx%2bWbWWjB0AXY4R2rk3qQhP7H9x/kMARZWH8mK9GYQ9r%2bIMj4nkjvNCXu6rAtsDpfcNvvH%2bYgXmrUi2uvmEdrN2kJQ0zQHx71t%2bLghqBMlXgdB%2brOxevG8v/u8HvKZFW4/le9cCZsKokI%2b3Zzg53fdUQZhO9mDlPFXILGOSBTcy6Q7mWDuix/l%2bmyP1eUGCQ%2bOG53wkZhWuP4hruzH3bRz3fxrntHrv4pj/SIYZvG8lG90LAFcTUcDr%2bSwKZMRV4NPgbU2s%2bxW5hJhWBF%2b3aDjeyVJf90Jo5%2bkZs56NWiem8xyxyW7w8UBtVIjsOSDLR3DFl8dzAP5uBRwuYALbEXzFNogkfFTj7SEOru7UW54yYMWExbUPFxJgVGLCeCrFDK4DkWkmAquX5RHq%2bb5sJK9AzzT4mWmKOpUD09DOjAJh/jmssl3nD8SkIF/c7WL7MglQk3xSEQ/ORbawYiui/2eEPnfobDCS9czBSuxAl7TYjYzMUw/mChw3wd2cL5Jr41sv7zKMe2JO4fGNbHV4i7hPiVHfPVltLRfmq5Kt2FjSciBAItTL1K7V1/egXYmfu8WTUnBwJVvaMMjolRiULUWCZFwMMCIJW0kCbOLZrtjiifTuAZ1zerKvKsuflnpkbhs0P3dO05gYYAu1us3fBk2UBs4utdmnuFhPtn3G9/f7gdz/IyZ4kxjP2ph%2balc4AvCPZhUaICW8gHeK%2bM%2byI1IWyGhXlf5/KHBExiIBAQ5nSxRoy9WY1cDsJsbRwLUqoCgxIKaT637OOQqaxDLbMTBAb4mWCzG4tqOCJKdKGtbQoI1iQcu2EJqUJz973KtfMEFiGHHk%2bjpEvT7e7KU0aMuA7S%2b1xd7/HLmwqihSG/ePJUB8%2bxWAvbzXlwVeYsg30aBHtANUOgBxgvIaa5PCgDyWcaH8HwaoASJacefNDprgmcKN7CsyzABzcywCnISfiknureDQsUdon6QBL0WyKtp70gz4kbxsElY/qFdyJmugSmtDuL%2bmHJx0kATg%2bBMpPEj4PBkMMNoO3DoEA9JahdxdWiQ3zC9jAdCESIGowD0VGOBorlVIYGoJ2Mr77cSogAqNRQIeYlw7VSXg5QpSID7AYzqdNBG7QOKF34fi/9%2bbFZ0hqPGLNU4b98LmhLj7mKWojp4oP0AlTCh1xs0UZfToe08RB6v4Aani6CmhKzwB4u8yQxU9QaFlRxVP0HOGwLDrJ8UVnh8QmZ8NRYuxP6XBGytkUzTXqCFhmU5KjCcadDlICYnfShnooD4QC%2booQerFAmsr1vSUQ2Qv8ZomVAvNUjdq2aJx4%2bsVxF/adeT/GuLkTIV8QGg8KCg6KiwyLIUkBF1qoobHFkFQqfHTBn23S7vj5H5VDxi0d7ItMHfNy86qGP1gES5p98L3z975AOPfrrSl51L8az355RHxSVUtoBvolRiRG3UPkU6PNRepcbFpVENm4moIonq0E90RGL7%2bSR3KFElO0NjP6JesBJGvxVrUgglcNZcqRDzRNiB4XFDBaYifoBouhrbuNu9HlPB7SrvguH4i/j/Kdcp2NOPTX/z3UA3TSyziZVs9TvoND1Tf2xPYglRVW/Zh/JWWkyUKSVqlaakfVi6M8N4eizlw7Rgw9ZoijV%2bJ%2bF4spZ/ZL2VI1gaVIcmabLb5ip7ARcunAoOo6/bkKf4CCJ6JMbOhGlRRi0j1ZxpMBNF2HSEORu5VleZOReJTv6pl1vACNRTXDTU87%2bQcQCew%2bNJrczq1nFCVNdC7sHmRgGr5D2Dem8CMr%2bD8DYMkwBYScDgz%2b1Yg/mjWiWpUiT2vX1TsTTRen4DUBr2MlmoaWMe63on409fwwHW4vz5rlsw9w7ZKnnRZH93KzDZn6Pg1EblmSR6BHStxbK7nsS4rzU3WXWWf0mp9RV5N83SvhU6iKVXV3TZ/dU2Xid3A0kIi%2bTnlP7QDpFJ3LTG/C7O4FYsdpHZ/iTRopf0qPxXKeXfocl7eIVI0QYtDc5LkB4s0mSs20CSrcH0Ox29Qj4DqF%2bqo7nCCA/zSLwWttqXuLR/l2asreXflpTzJ/1GHyLtdVZiNdPjFhzgXVwU9Qjoz/Fu1WtTN8QNMuGvehxD5GOosPUlW1FZwl4P01hkLbL1TPUIum/XlMIjTNiC2DT3Yp1GKzj/Az11K4XFmGBMYu8T8Cud342VbcLyhKKIYl76u6PGJGpyo7FFFBhjdXd7iRbtnYKNk2CyFF8/xtqbtgejSvcHYz1IPEJ/fCELJNz8L8D3tIi%2bg6Hk08DhQnQGeYRScnwY%2bR2nR78%2bEZF6QsVo6wnlr1DvEdQHS07i3DMR%2bhBFfRtvZQgIljBUGvA3wekUGxIh/BXiv0vHKQENsC6PIDUjmE0F5PFVe4u1iWAYQNGzNT4qdxwUqWJa5DomnPsNTw17hSknGSKr5XG0MXbE0L5bQCt0FuII/iQPDDPkTl4GQG6Sh0S5MBVYMYEAaNG7Jswdkv9c9wnbolvm8uUmYcJpUkVT2qBNphOx5fbzcp2uHaKSw1RigV52CM8nykAe6OqxfjPbRRCEJ7wH8TeXdJZHaznyARL4OM2Iv/gcmNoftJBEV0AzwSnf%2bR1j6i5GdeG7FyMTHBiomHJZZevXNkA16dJXzsR/ENLVhG5EBOlTvqkZugh9j3BtDnR/5g8pYCorPSc%2bf1h3itmhUFCcEDMgHDyMBJTZAmKsbqJ%2bQrtX5KbpFylPyh5JiF%2bpqP6UvyL6tO8T1x45Adh%2ben5VusgXYgHc0cyObeh9R5u96AXNuLDLUpmEP9lekfqbGk4ZjuJv7Od3ljdV/XX2sMIQESPOmnXNGtQiHn%2bVQeTbIQo2m78OUomz/b4cpN38RRJ86vP8N2CCrP4w4BtHptZzB3cqxxxEB4fVFF/khSlJRRgzK8gxrgGOlcGUoRxL5/wOi3liE/omO9AAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="22" data-src="/blog/assets/static/GitHub-Mark-120px-plus.b5813a3.ef7a02b69836dc8b6a732a54c4200dcb.png" data-srcset="/blog/assets/static/GitHub-Mark-120px-plus.b5813a3.ef7a02b69836dc8b6a732a54c4200dcb.png 22w" data-sizes="(max-width: 22px) 100vw, 22px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/GitHub-Mark-120px-plus.b5813a3.ef7a02b69836dc8b6a732a54c4200dcb.png" class="g-image g-image--loaded" width="22" alt="Github image"></noscript></button><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></div></header><main class="main"><h1 class="tag-title text-center space-bottom">
    # CSS
  </h1><div class="posts"><div class="post-card content-box"><div class="post-card__content"><h2 class="post-card__title">[번역] When CSS Blocks</h2><p class="post-card__description">이 글에서는 preload를 왜 주의해서 사용해야 하는지, 또 Document 순서가 성능에 어떻게 중요한 영향을 미칠 수 있는지 필자가 경험한 실제 사례에 기반하여 설명하고자 한다</p><div class="post-meta post-card__meta">
   30. November 2020 /
   <strong>5 min read</strong></div><div class="post-tags post-card__tags"></div><a href="/blog/when-css-blocks/" class="post-card__link">Link</a></div></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2023. </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"tag":{"title":"CSS","belongsTo":{"edges":[{"node":{"title":"[번역] When CSS Blocks","path":"\u002Fwhen-css-blocks\u002F","date":"30. November 2020","timeToRead":5,"description":"이 글에서는 preload를 왜 주의해서 사용해야 하는지, 또 Document 순서가 성능에 어떻게 중요한 영향을 미칠 수 있는지 필자가 경험한 실제 사례에 기반하여 설명하고자 한다","content":"\u003Cblockquote\u003E\n\u003Cp\u003ETim Kadlec의 \u003Ca href=\"https:\u002F\u002Ftimkadlec.com\u002Fremembers\u002F2020-02-13-when-css-blocks\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EWhen CSS Blocks\u003C\u002Fa\u003E 번역글입니다. 굳이 이 글이 아니더라도 모든 번역글은 역자의 의도와 상관없이 원문의 내용과 다르게 전달될 수 있으니 원문도 같이 보시는 걸 권해드립니다.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E이 글에서는 \u003Cstrong\u003E\u003Cem\u003Epreload\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E를 왜 주의해서 사용해야 하는지, 또 Document 순서가 성능에 어떻게 중요한 영향을 미칠 수 있는지 필자가 경험한 실제 사례에 기반하여 설명하고자 한다(참고: \u003Ca href=\"https:\u002F\u002Fcsswizardry.com\u002F2018\u002F11\u002Fcss-and-network-performance\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EHarry Roberts가 상세하게 설명한 글\u003C\u002Fa\u003E이 있다).\u003C\u002Fp\u003E\n\u003Cp\u003E필자는 \u003Ca href=\"https:\u002F\u002Fwww.filamentgroup.com\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EFilament Group\u003C\u002Fa\u003E의 열렬한 팬이다. 그들은 엄청난 양의 고품질 작업물들을 생산하여 지속적으로 웹 개선을 위한 리소스들을 제공하고 있다. \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Ffilamentgroup\u002FloadCSS\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EloadCSS\u003C\u002Fa\u003E는 그 작업물 중 하나인데, 이 프로젝트는 필자가 오랫동안 중요하지 않은 CSS를 로드하는 방법으로 권장해온 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.filamentgroup.com\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EFilament Group\u003C\u002Fa\u003E의 작업 방향이 \u003Ca href=\"https:\u002F\u002Fwww.filamentgroup.com\u002Flab\u002Fload-css-simpler\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E바뀌긴 했지만\u003C\u002Fa\u003E, 필자는 여전히 운영 환경에서 사용하고 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E필자가 주목한 패턴 중 하나는 \u003Cstrong\u003E\u003Cem\u003Epreload\u002Fpolyfill\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E 패턴이다. 이 패턴에서는 스타일시트를 preload로 사전에 로드한 다음, onload 이벤트를 사용하여 브라우저가 준비되었을 때 스타일시트로 다시 돌아가 작업을 진행할 수 있다. 아래는 preload의 예시이다.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-html\"\u003E&#x3C;link\n  rel=\"preload\"\n  href=\"path\u002Fto\u002Fmystylesheet.css\"\n  as=\"style\"\n  onload=\"this.rel='stylesheet'\"\n\u003E\n&#x3C;noscript\u003E\n  &#x3C;link rel=\"stylesheet\" href=\"path\u002Fto\u002Fmystylesheet.css\"\u003E\n&#x3C;\u002Fnoscript\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E모든 브라우저가 preload 기능을 지원하는 것은 아니기 때문에, loadCSS는 다음과 같이 polyfill을 제공한다.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-html\"\u003E&#x3C;link\n  rel=\"preload\"\n  href=\"path\u002Fto\u002Fmystylesheet.css\"\n  as=\"style\"\n  onload=\"this.rel='stylesheet'\"\n\u003E\n&#x3C;noscript\u003E\n  &#x3C;link rel=\"stylesheet\" href=\"path\u002Fto\u002Fmystylesheet.css\"\u003E\n&#x3C;\u002Fnoscript\u003E\n&#x3C;script\u003E\n\u002F*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License *\u002F\n(function(){ ... }());\n&#x3C;\u002Fscript\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"네트워크-우선-순위-조정\"\u003E\u003Ca href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%9A%B0%EC%84%A0-%EC%88%9C%EC%9C%84-%EC%A1%B0%EC%A0%95\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E네트워크 우선 순위 조정\u003C\u002Fh2\u003E\n\u003Cp\u003Epreload를 사용하면 어떤 자원이든 바로 다운로드가 가능하다. 스타일시트 같은 초기 렌더링에 그다지 중요하지 않은 자원들에 대해 preload를 사용하면 브라우저가 비동기 처리 대상으로 판단하여 매우 높은 우선순위를 가지고, 다른 자원과 상관없이 바로 다운로드가 시작된다.\u003C\u002Fp\u003E\n\u003Cp\u003E아래 이미지가 좋은 예시이다. 3 ~ 6번이 preload를 사용하여 비동기적으로 로드되는 CSS 파일이다. 설령 해당 CSS가 초기 렌더링을 차단할 정도로 중요하지 않다 하더라도 preload를 사용하면 사용하지 않은 자원들보다 먼저 도착한다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 900 169' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-6f011cb8657ab88684a07d23cf8545eb'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-6f011cb8657ab88684a07d23cf8545eb)' width='900' height='169' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAMCAIAAABdkSyeAAAACXBIWXMAAAsSAAALEgHS3X78AAAE\u002FklEQVRIx61VaY\u002FbVBTNj%2bcrH\u002FkACPEB1NLpgkBCVYdKZaadLOOMszneEjten5\u002FteHe8JE7CidMOQyUqVPXJejm5frHvueeemw47eOZ7NI4TQojjOKqq2rbt%2b75pmlVVWZaltwtftXYlcZxm2Q9\u002FXX3TZd5MmbL77ebuZ%2bfS1n9y7See%2bdg1HlHrlxY8puYjn\u002F5OJZUMBG8oeoz4fmcEFzsruc%2b73sWr5PvL8CUbLTVLMWzTN5pjs98fml1zPB4PzWGf7o\u002FR8YQPh9N2PNRxfdycItvttsONnpmGZlrWeDxmWXY%2bn89ms%2bl0ulgsQEOSJJ7nEcTd6%2bvr4XCIOIKyotIgpJ4bUDNZ04AGvr2O3HhNgvUHgEhIY9wijms5nmlTw6a242M3LIoIcTxW1r5%2b%2bfarP256zLti8KPPvFz9RownlLyhJFatQNV8kaN9VV6pC22laFVRF3mZpdkm2%2bR5HoZhZ3DzjBDLdT1RFJGraRpnAB2CIEDJUX5FUaAM4i1YCYK49n3UAhJtymrb7Ku6Kqpit99V249BWVdlWe6b3bbGqRPAXrUAKN3kc0sd6zIl4kbvxfrE5x1\u002FSsIFWZDJTGNm%2bi1jvOmvXvfUy4nW1wJRcQSRFz3PW6\u002FXRVF0hMlzxzkRQNIcxyFjQRBQcjQPCKBzkDc0AYHVaoW7AFAAPz60BJBc0zR1XX8KVNWuaaoKkRM4pf8BINhUYZnZaUrSzTrJaLox89rOC1slc95kJXsyWd6%2b5n99JVwMV1cjrcubI1O3qEux8PDOsPdUWcqGYSLLCQ4vl%2bcWQrpoocViibZBa4Eemgd3sYMniEHBKIogYpqmnw2w4pgEoRaGRhybUahHLYgjUyWcYI4kezwcMdyEl8WlR\u002F0iL7IsT9Ikaxfq2JkwLyglKPZCllFs07TOXQ5DJ0mC\u002FsFXQeAhiHlalmEYoIEXw0O73Q42AkCl\u002Fws8PAN8jjwA0CGKEztJSJ67Jx1OgOJSHG5uDCUyFuS5rhtIoCzK1svH3fb08\u002FMTOrO7JxYksSyUH05FumcpoAA0kmUZ5Z%2b26%2bbmBvHzAZzfbDZxHIMJKvHZANMvjp1grQZrDbUPAy0MVq0OuuLMBJuVyEihc2O90F1JctkxeXdrXU7NHjflBFFAKTu33ecOsTzPR%2bujT1Dy1sQCUsRrMFtH7ULqd3d38MZKVXHM97w9mrgsYSNUuPokKP8NyntQAJR1XaQpFDCzHJoD2FnmZDlRFUXgFwIvS\u002FJyNGd5hefUiR4uFz638pUkzrI0RQE6\u002FPgpZr3j0LOJUfizidEuLQEbfBDHDhFAAwCywB77\u002Ff49gd0OZvwEwLGHoGzXP2C7S2IvCuFjK44MXEligY%2bx1NS5rsw1W9KJtnQtzbON47bGtc\u002FDNA6SFBpGHaZ7ARMj3Ta99yY%2btxDKj1xBDK0FVyAIDud\u002FBpz\u002FIi30AWRRFCSxFYYm3AwRsEeRlqQGLs%2bY%2bMqdrw49hSFij0gDyv05Za7YyWnYdIb9F7q%2bSpIUzY10Mf6VdiF7FB5qwM1ghZLjZcgecZzBux\u002F6Emp8BO5v\u002FT9wb2ugpgX77bZpH3iot1tfmxKhS8S%2bvxz6ChuorGtgJipo%2bM7t2%2b84bozxMhgM%2bv0%2bmgdzExhkMPVBERHsEKHX611dXUGH878EOgRjCkwwT78QyNrPexABpC0KA9%2bnZO1Rnpt2310PmYGlySkRQ2P%2bNx%2bxIcFyYSHwAAAAAElFTkSuQmCC' \u002F%3e%3c\u002Fsvg%3e\" width=\"900\" alt=\"image\" data-srcset=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-preload.82a2fbd.7c0189bd1b4292decf968fd513aeca93.png 480w, \u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-preload.2671d65.7c0189bd1b4292decf968fd513aeca93.png 900w\" data-sizes=\"(max-width: 900px) 100vw, 900px\" data-src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-preload.2671d65.7c0189bd1b4292decf968fd513aeca93.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-preload.2671d65.7c0189bd1b4292decf968fd513aeca93.png\" width=\"900\" alt=\"image\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"html-파서-차단\"\u003E\u003Ca href=\"#html-%ED%8C%8C%EC%84%9C-%EC%B0%A8%EB%8B%A8\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHTML 파서 차단\u003C\u002Fh2\u003E\n\u003Cp\u003E네트워크 우선 순위 문제는 대부분의 상황에서 preload를 피하는 이유이다. 하지만 아래 코드처럼 외부에서 로드하는 다른 CSS가 더 있을 경우 문제가 복잡해진다.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-html\"\u003E&#x3C;link rel=\"stylesheet\" href=\"path\u002Fto\u002Fmain.css\"\u003E\n&#x3C;link\n  rel=\"preload\"\n  href=\"path\u002Fto\u002Fmystylesheet.css\"\n  as=\"style\"\n  onload=\"this.rel='stylesheet'\"\n\u003E\n&#x3C;noscript\u003E\n  &#x3C;link rel=\"stylesheet\" href=\"path\u002Fto\u002Fmystylesheet.css\"\u003E\n&#x3C;\u002Fnoscript\u003E\n&#x3C;script\u003E\n\u002F*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License *\u002F\n(function(){ ... }());\n&#x3C;\u002Fscript\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위에서 설명한대로 preload를 사용한 스타일시트는 그것이 중요하든 중요하지 않든 높은 우선 순위를 가지고 바로 다운로드를 시작하며, 이러한 동작이 브라우저의 페이지 해석에 영향을 미칠 수 있다. 다시 말하지만 \u003Ca href=\"https:\u002F\u002Fcsswizardry.com\u002F2018\u002F11\u002Fcss-and-network-performance\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EHarry Roberts가 이것에 대해 상세하게 설명한 글\u003C\u002Fa\u003E이 있기 때문에 꼭 읽어보기를 추천한다.\u003C\u002Fp\u003E\n\u003Cp\u003E여기서 간략히 설명하자면, 일반적으로 스타일시트는 페이지의 렌더링을 차단한다. 브라우저는 페이지를 표시하기 위해 스타일시트를 요청하고 해석해야 한다. 다만 이러한 과정중에 브라우저가 HTML의 나머지 부분을 해석하는 과정을 멈추지는 않는다.\u003C\u002Fp\u003E\n\u003Cp\u003E반면에 스크립트(\u003Ccode\u003E&#x3C;script\u003E\u003C\u002Fcode\u003E)는 defer나 async 속성이 없는 한 파서를 차단한다. 브라우저는 스크립트가 페이지 자체 또는 페이지에 적용되는 스타일을 조작할 수 있다고 가정해야 하므로 HTML 해석을 멈추고 스크립트 실행을 우선한다. 만약 요청중인 스타일시트가 있을 경우, 앞선 정의에 의해 스크립트가 실행되기 전에 해당 스타일시트가 도착할 때까지 기다린다. 즉, 스타일시트가 더이상 렌더링만 막는 것이 아니라 HTML 해석을 막는 것이다. 이 블로킹 동작은 외부 스크립트뿐만 아니라 인라인 스크립트에도 동일하게 적용된다.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"문제-파악하기\"\u003E\u003Ca href=\"#%EB%AC%B8%EC%A0%9C-%ED%8C%8C%EC%95%85%ED%95%98%EA%B8%B0\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E문제 파악하기\u003C\u002Fh2\u003E\n\u003Cp\u003E이를 시각화할 수 있는 가장 명확한 방법은 Chrome의 개발자 도구를 살펴보는 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003EChrome 개발자 도구에서 성능 패널을 사용하여 페이지 로드의 프로필을 캡처할 수 있다. (스로틀링된 네트워크 설정을 사용하면 문제를 더욱 명확하게 파악할 수 있다.)\u003C\u002Fp\u003E\n\u003Cp\u003E아래 테스트에서는 Fast 3G 설정을 사용하여 테스트를 실행했다. 메인 스레드 액티비티를 확대하면 HTML 파싱의 첫 번째 청크(페이지 로드 프로세스 중 약 1.7초) 동안 CSS 파일에 대한 요청이 발생하는 것을 확인할 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 550 509' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5952b1e25ee95a7bec8aed4aaefba92f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5952b1e25ee95a7bec8aed4aaefba92f)' width='550' height='509' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA7CAIAAABE7huLAAAACXBIWXMAAAsSAAALEgHS3X78AAAK4klEQVRo3u2Y%2b1PU1xXAv\u002FER8ug00%2blUGYTdZZeV17rLY3dhgVWeu7Dgizc%2bYBeQl4CKgKDRTDo6MbHTpijgI9WmeVQnmhqbRq01v9SOQhIfSWzTzNROa\u002FNr\u002F4D%2b1M\u002F3Xvi6AkkAiWs7njlczj3f8733nnPP67vK06ait0%2bfu3D%2bgzNnzoyMjIyOjl66dOnKlSsQI\u002FfDZM4sYE4WCV5HecpUePLd3517770jR18bHBo%2bNDj00v6Xjx577cbNW1evjVwbGdVwZPSj4OnscE4WCV5H4QbOvn\u002Fx1vXR8%2b%2bfPfnW6%2b%2bcfOv0qbfPnT198\u002Fro9Y%2buXv\u002F4qjoKvKHRH1%2bbNd74ZORBXp%2b8DjdQlOZrqu8\u002FvPPwh33Dl\u002FuG\u002FrBz%2bHL\u002F8OWegQu9hy72DJzvPfR76J6DF\u002FoGL\u002FUOXuo5eLHn5x\u002F0DMwSdxw83zsw%2b9eD1hkjlDBTkfKcw%2bUfbj7yRXn\u002FqfqDnzYM3g68%2bknj8J8bh\u002F7SOHi79pU\u002Fbnjpw8rn36ndf3n93gt1P\u002FlT64l\u002FtRy\u002F23L8nwLvzgjbTtxtneErk7FVXWdsa\u002FUGnohw523%2b5ebB0XV9J9Z1D2\u002Fc\u002Feu6F07VbB\u002Fy\u002F\u002FjdloMjVVsHGg9cDuz7bU3XQEX7K7V7TnWe%2bNvWN7\u002FqfOOrrW\u002FcnSl2vXl328zfmoDbxDqSVhVQwt3uhqFtv\u002FpH29G\u002FNv70SvPgzeahW5tevdYy9GnbsS9bD99uO\u002FpFy%2bHPNx%2b53TL8WePPrrYMf955\u002FE7XsRsdv\u002Fiy\u002Ffjf24\u002FfmT52nrjTMRP5KbFDrCNp5clo70JDwfcTyxY7A4vsteFpDYud\u002FsUOf3ha\u002FSKHH1wscJHTH%2bHiUQD%2bD1P9sTmNzdtftBW2\u002FCBl42Jn3SLHdDEivT7c6Z%2b%2b\u002FJTICSPSAz8StKqAqoO%2bYL4ud35U3vyo3PtQJzmMeWHRngW6PFCJyAm3rlzXutvgKFUishfo81Wx6WGY0bPQMAP5KZEdOcy8KJUeU2A6%2bIzZF2b0gvN0BRFJa2padxvTKp6Iyg8zFs5oESrP9OWnRHZ8Jsa30KDSs1RgSfLalq4Xza7\u002FQQVEzHi%2bZ\u002FbFZVU\u002FF1e8wOCZ0d6PhAJCB68Smb9whqd\u002FhBQAnzIWhs1870dIgdnhYwUeK\u002FBYgccK\u002FL8pQC6fJj7L3kbv9OW\u002FbpGnTYUPuAgl6NkY35MGlVYWGAqniWExNA7e%2bfoHwjBT8cLoogdcRD2MyTdP54FWlljylywriLDkfysakgv1Nq9uDD0CNcITxJnMHJe0eqKTi\u002FRJhV8vpq3g\u002FWaOIblIEkqM0WA06JaaTSrGGMdGSYyjOcYYazalOVJdaQ6nPcUpiHSnPd2Rmp5mV%2blxTHPaQZhiatfQYU92qsIORgTsqWNTl8BgSfgOe4rr3iN1I7nsPc69VxxKYqLF6UyLjIxasiQySqeDiIxSkdkSJioRqdcbDIbo5OQUMDsn1%2b1ebrMlpdrtaWnpySkptiQgGeRperoLZkpKKjSjRJ7k5xdkud3LrNaMzEy283i9LGK12qw2IEkThsjMzMrLy2c19ZFY2e5w8ArLQqscjpFyb3Fl1apV27dvz8vLKysra2lpqa6uDvj96zdsqKmpgaiqqsrPz9fr9dHR0SkCNm3a1NHRsWbNmvr6euQrK6vKy8v9fn9FRUVBQUGZAKbZ2dnsZbfbGaFZtqSkpLq6ZsuWLUyRaWho8Pvr1gtwOp2sjLDVal23bh2c1atXQ2zcuJFj1NbW%2bny%2boqIij8fDOmyUk5ODtVIFKEwaGxvZsqmpqaysvLKyEgk26OnpaW5urqio5J3w8HCTySQVYN1AIMDIaVCPPaDRgVewAq8zbW9vh5YKsFNGRgZ8ZFiwqWkTU3QoLS1lHbZGE8wrFcDoa9eu5RHyPMVYWIrz5OXlshcnqaurw3wogyTyqgKqc0RHM2LmSOEzAAQcRuRiY2PlVL221FT5msPhkAZgCjdZOIE8cXp6%2bvLlyzULATziiPIVbRH5ipxOAISTBaSKlTUmK\u002FDiypUr2UJ7UTGbzTFmFWJi5P8xkFOj0QixdOlS1JBbahtPBnk%2bBNBkAv8b3poMUwprTNwsWEAxmYxgjMmkHXppEEim1GGCbsHThwkTdlQSLNZEizU%2bIRFj8wxf1wvArxiZSjm9yESSD9MgQDJjQgrKlqFrHUc\u002FK996yOlIIT7cbndmZiaRjbcRT9AkAUJtxYoVeCF8HDExMVGKkXaKi4tR6eHfwz0Fdp75d8\u002FZ\u002F2x88TeZLuf27u6dO3ceOHCgu7u7o7Ozq6ursLCQ7LRt2zaYe\u002Fbs6ejo7O3tJTns27eP6d69e8kVOp0ulArUPf963QunigO7LAnx1ATSH0kXY2dmZpC5RXlSw7KkZCWXQC4jSZOPvV4v9QHzkxND7EJGQ5QJpKEwGrElbs0oXZx8ahwHaJ7InKsToElOJ%2by%2buytS%2bBOBag7OP3JLjZBZSEtKwSloQnbSgl6jNb75fpgzBViLHC\u002FNzDYTCAnyBJKPfEJCgqYMFwI\u002FWgCc%2bPgEVoPPiBgj\u002FHi4CQmIGcZBrjk3CpBVcnNz6UZkuZFgsVhooWS9oBizX1xcHPUV7ydICABqIYmIF2EywszKchMvRT5fcXEJUzIYzQXyWVlZjHRj5C46CORlJzNXOigclJClu%2bBY7ERoygMRsuwNk11xd4pra2srbR9ph4aEek40b968measSwApeK1obyCQhE%2brRwaDoGnj0CQAfyDAdMeOHXQ7c5W7FLlK7DhgaUYuHaakATwH%2b6EeCQr1SP\u002FkKM5EkkVzn2r1YvpF%2bMjAhMAQWEEWCl5ZsXw5BGojzEgNmavqoWjOrRFwtTAIHrGZyEV6WYBlIgLUb4ZxiIiIkJ2fVqq1nCZfV8fp5a7pKoCL49AyLjE8o2b7ZcuWwcdfbQJ4Klt2eS1weIohiR\u002FcHcPT99JdcwloG5ydpoQ5U4DTS2eQAUqQEZ24hsfD\u002FRdwSukzBAO3j2sQEjJIoFEGi9Ky02tQlfmo4PsD98DwD602K1gR05KCxFW45LeF1q7yiHtQv%2bySbLCRIRjEt5\u002FapnNR3ABMdMCzMQGvs2BwNfjOFQhO%2bZKlOr3RFOz9WnHguLImTAgYGQya2ENtJbAiWZ9d8Vp5LFmJtDoaLwAxHmFd\u002FTggJttvrYSH5PNA4dLzcnNJ%2bfgutMvlIgwyMjKTbDZ5oCYBfLlWVVaS44nUDQJI8\u002FhYaHtpVQFcmRtgdGdl5QpNqM3oIFM1Zi4tLVu9alVfX9\u002F%2b\u002Ffv5YKeX3rVrF1OqFZERegU0b5HOIP1bBHa8xidtc1ZqlvSx4B5zQjMXAgW0iNRCcMJUC1\u002FKkAxZCbIYyTolIzg0CpAQcRubLQlHWiaASCDBWwQQu0xhWkRR46zUBBo1BPArDk3LQN1gBYRDooPiEiB7TBo42cZwJgoWBDk%2bW0BObq5MQdXV1YQBEVJeXo5ifGE2NzdTxShzIfm2VKSvczhpb6uAuPh4TM654cOUXYP0HzIPfPVOLBZCnOgnX1HLIUJzA1qkqr4%2b7uLBv8DINk77pJLxoEWzFiEhiwEMLCnZyXEa2T%2bLA6m\u002FzHEhmJxH8rNL05BLMAX9HBayNEovKX\u002FkweMZRa%2bWQ1Mk\u002FYTeGH5bW5v8WRhHZ%2bRzhK8T%2bj9iOrRFQFVA\u002FiJL8aItldEMkSmAwxG1VLfKyspOAYH6er7C%2bC7r7%2b%2bne3uYXee3N3OSkE6iuTgEwYpKjvtBptqH3LdNCf8F22clkduAlUkAAAAASUVORK5CYII=' \u002F%3e%3c\u002Fsvg%3e\" width=\"550\" alt=\"image\" data-srcset=\"\u002Fblog\u002Fassets\u002Fstatic\u002Finitial-css-request.41e76af.14194920841a6e8f5fc15dc2e9b5d604.png 550w\" data-sizes=\"(max-width: 550px) 100vw, 550px\" data-src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Finitial-css-request.41e76af.14194920841a6e8f5fc15dc2e9b5d604.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Finitial-css-request.41e76af.14194920841a6e8f5fc15dc2e9b5d604.png\" width=\"550\" alt=\"image\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E그 후 1초 정도 동안 메인 스레드가 잠잠해진다. 약간의 액티비티가(preload된 스타일시트에서 로드 이벤트가 발생하고, 브라우저의 preloader에서 더 많은 요청이 전송되는 등)가 있지만 브라우저는 HTML 해석을 완전히 중단했다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 900 243' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c8e86d28efa7a22113d1c31ae7b6ef8c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c8e86d28efa7a22113d1c31ae7b6ef8c)' width='900' height='243' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAARCAYAAABtu6qMAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6klEQVRYw%2b1XTUvDQBCN2GzS1KIotCBqk62xLVJBxYI3W9uk6YcVRQ%2bCCOJBz4J\u002FwotHf4a\u002FcNbdzTZN0zQNYkFsDmFe3kzezr4dQiI9vX0A2qnDimmBVmyBqp9DGjdBplyu2ofT\u002FgvUnEeOFb0BqtGkl1vDoopbkK30IM0w40U%2bNhY6Cl03f9AH4%2bQSUKEBmV0L1soO5zO0LxbZ\u002FcZ%2bl%2bfZtV5xoDG45315\u002FQj9XPWC74XtSWM53eVZXWr7DDaPruD98wuk%2bs0zWdpqEgW3iWzYRNZtgoy2F7XSgKQK1ogP1MjYIcjsUWzx3ERNTJyiOFvqkHzVGenogbUYL\u002FpcLthkteyQ7vWAPxvURHiKDq%2bxiGr2SW3wSqTD9h3QDYJi2IDoRZM8enh4H%2bSHHG6DYvZEflhj%2bXTGMQrFriY9BMjsdb1extedrNfMDpj1h1D9sd4NX28%2bLrvbACl\u002FfMtPH3G3XHf8WMHhPMcssmfpBCBvAiLqZ2EsTm%2bqjh3ojZ10Z6b%2bGOfbl2Z2iZQt9SINiMS\u002FbYCI8eptr4dZ607ToFNAJDpy3in\u002FBQPmgaPyklp0IkZuAQyQ%2bVvSWlwDUGJAYkBiQGJAYsBiGzD5\u002FR8Xi38BJP4FZN83\u002FI8154Cj8v9kAuxwHIhhtQs\u002FAd%2bqHROfHgWJtQAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e\" width=\"900\" alt=\"image\" data-srcset=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-quiet-main-thread.82a2fbd.a83e984d9b67eb9136bedd287f55c475.png 480w, \u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-quiet-main-thread.2671d65.a83e984d9b67eb9136bedd287f55c475.png 900w\" data-sizes=\"(max-width: 900px) 100vw, 900px\" data-src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-quiet-main-thread.2671d65.a83e984d9b67eb9136bedd287f55c475.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-quiet-main-thread.2671d65.a83e984d9b67eb9136bedd287f55c475.png\" width=\"900\" alt=\"image\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E약 2.8초 후에 스타일시트가 도착하고 브라우저는 이를 해석한다. 그 후에야 인라인 스크립트가 평가되고 브라우저가 마침내 HTML 해석을 시작한다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 900 96' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-64ee2ea1892b3a25e1d55dde769f01cb'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-64ee2ea1892b3a25e1d55dde769f01cb)' width='900' height='96' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAHCAIAAAA3VtxdAAAACXBIWXMAAAsSAAALEgHS3X78AAACsUlEQVQ4y2PYvWfPvn37tm7dumnDut07tx07vP\u002FIgT1HDu49cmjf0UP7gOThA7sP799FDDq4d8fJYwe3bd\u002FRO3fNihUrDu3beezQ3iMH9wDNOXpg95H9O7GhXRDGYRDaRSo6cmA3g3d8pVdsuVtEoVNIbuXkbb0rz3UtP9O59GTnkhNdy051LTvZt\u002FZa\u002F4bb\u002FRtuQdAEGANNpG\u002F9jclbH5RP3uETXTB9RmPz1BVNC093rTjfvuRU87yDXSsv962\u002F07v%2bNhjdgjEQ3L716MZiWoFFfNMdBgYZVwZJJwZRWyCpH9ZlkzLDKnmGZeJUy\u002FhJ1knTLBMmOeQscypc61SwBoKcC9fA2QiRwjWOeavcyzer%2bbWxydhM7YuLyiy0iah0iat2TWhwjCp3TmjyzJrkltbnltbvmTnRPb0fyPbImOCZMcE9fYJ7Wq9r9hynwnVOBauBpmG3ogCLoEP%2bWgYOJXcOZQ9OFU8uFS8maQcGKTsgYpSyByImaXtGaXsGSRsGCWs4YkTlQkRgglaMUg6Cmh4N9XFW1tqaVqp6NmqaVioGThpm7tqmrurGzmqmbhp2Vsaebo7uLnZuzrbO9lZe7s7WptqCksoMknYgExCmIVkhhS4CRMxAQSFrBjZFdyBiB3uDXcmDXdkThJSACOgrLyCbAxUB\u002FYkmAlTGCRME6uJQcmPTCnV2s09MCw2JCmifUJpZlSepaiaiZiumaSemYSuqaiuuYS%2bh4SCqZiuubgdki6nZ8Cs7sit7oZmGsFQVXQTiEqDzkDyg5AFhwxFQhB1VBCKIJgLyNpIgu6Ibs2aouJZLeH5xSG6xTUhSVEU9i6wzq5IXq6Ini4IHDLkDSTYlTwiDFYdpUEuV0UXgLqG%2bB9gU3Dh0QxkkXZTtY9VcEhgE7ZRso5jl3TiIcxmpHgAASkrS3jxaEN4AAAAASUVORK5CYII=' \u002F%3e%3c\u002Fsvg%3e\" width=\"900\" alt=\"image\" data-srcset=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-css-arrives.82a2fbd.8293cdba5522bad22515632fe5e9dfd1.png 480w, \u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-css-arrives.2671d65.8293cdba5522bad22515632fe5e9dfd1.png 900w\" data-sizes=\"(max-width: 900px) 100vw, 900px\" data-src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-css-arrives.2671d65.8293cdba5522bad22515632fe5e9dfd1.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-css-arrives.2671d65.8293cdba5522bad22515632fe5e9dfd1.png\" width=\"900\" alt=\"image\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"firefox-예외\"\u003E\u003Ca href=\"#firefox-%EC%98%88%EC%99%B8\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFirefox 예외\u003C\u002Fh2\u003E\n\u003Cp\u003E이 블로킹 동작은 Chrome, Edge, Safari에 적용된다. 단, Firefox는 예외다.\u003C\u002Fp\u003E\n\u003Cp\u003E다른 모든 브라우저는 HTML 해석을 일시 중지하지만 lookahead parser(preloader)를 사용하여 외부 리소스를 검색하고 요청한다. 하지만 Firefox는 한 단계 더 나아가 스크립트 실행을 기다리는 동안에도 \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FGlossary\u002Fspeculative_parsing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EDOM 트리를 추론하여 구축\u003C\u002Fa\u003E한다.\u003C\u002Fp\u003E\n\u003Cp\u003E스크립트가 DOM을 조작하여 추론적 해석 작업을 초래하지 않는 한 Firefox가 먼저 해석을 시작할 수 있다. 물론, 스크립트가 DOM을 조작한다면 이 추론 작업은 아무 소용이 없다.\u003C\u002Fp\u003E\n\u003Cp\u003E흥미로운 접근 방식이며 얼마나 효과적인지 매우 궁금하지만, 현재로서는 Firefox의 성능 프로파일러에서 이를 확인할 수 없다. 프로파일러에서 이 구문 분석 작업을 다시 수행해야 하는지, 수행해야 한다면 성능 비용은 얼마인지 확인할 수 없다.\u003C\u002Fp\u003E\n\u003Cp\u003E하지만 Firefox 개발자 도구를 개발하는 훌륭한 개발자들과 이야기를 나눈 결과, 그들은 향후 해당 정보를 어떻게 표시할 수 있을지에 대한 흥미로운 아이디어를 가지고 있었다.\u003C\u002Fp\u003E\n\u003Ch2 id=\"문제-해결\"\u003E\u003Ca href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E문제 해결\u003C\u002Fh2\u003E\n\u003Cp\u003E다시 돌아와서 앞선 preload가 야기하는 문제의 경우 이를 해결하기 위한 첫 번째 단계는 매우 간단하다. preload\u002Fpolyfill 패턴을 버리는 것이다. 중요하지 않은 CSS를 미리 로드하는 것은 목적에 어긋나며, 현재 Filament Group에서 권장하는 대로 preload 대신 print 속성을 주어 스타일시트를 사용하도록 전환하면 polyfill을 완전히 제거할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-html\"\u003E&#x3C;link\n  rel=\"preload\"\n  href=\"path\u002Fto\u002Fmystylesheet.css\"\n  media=\"print\"\n  onload=\"this.media='all'\"\n\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이제 네트워크 우선순위가 다운로드되는 자원의 실제 중요도와 훨씬 더 잘 일치하고 인라인 스크립트 블록이 제거되어 더 나은 상태로 개선되었다.\u003C\u002Fp\u003E\n\u003Cp\u003E필자가 겪은 문제의 경우 CSS가 요청된 후에도 HTML 문서 앞 쪽에 인라인 스크립트가 하나 더 있었다. 해당 스크립트를 DOM의 스타일시트 앞으로 옮기니 파서 차단 동작이 사라졌다. Chrome 개발자 도구의 성능 패널을 다시 살펴보면 그 차이가 명확하게 드러난다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 516 112' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b39c51c15c1216ba3579259d83ac602f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b39c51c15c1216ba3579259d83ac602f)' width='516' height='112' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAYAAACfOxrCAAAACXBIWXMAAAsSAAALEgHS3X78AAAExElEQVRIx6WXyVIjRxCG%2b%2bKrT5gIQA2S0MYuxI7YdwnEDmIfiz048AJ45jI3X3kLR\u002FgF\u002FGqj6HR9iVJuK7wM4lBR1Vmqyj%2bz\u002Fj%2br5PVnxyWVTEoikZCOjg6JRCLad3V1SSwWk6Sb6%2b3tlWg0Kt3d3fo7Wnj8zvYtlUq5Pvn6048\u002F%2bIO5yWp%2bvSz92bEglUpKPB6X9vZ2xUHjmwaGnp4eHbOP9R\u002FAoc0rf\u002F5dDg\u002F25eHhQba2tuTg4ED29\u002FdlaWlJx2dnZ3J9fS03Nzfy%2bPioCTGnTTrXBKQyva%2be5\u002Fmbt1%2brn\u002F8QKVV%2bCR5uPsnPlWupVCrazs\u002FPZXV1Ve7u7uT29lb7l5cXOT4%2b1gP5SOD1BJQef5V8flrW1zfUQblclufnZymVSrK4uCjz8\u002FPaSMTFxYVMTEzUs98kGzQByVRaEzBTvKief\u002FlN5ounQS47KIVCUQM\u002FPi7L6empTE5OKo6pqSmZnZ1V29ramgwMDPwNR7NM8BLdbxQjozSob\u002FQPN9\u002F3dT6dTutCmJCsSaeZBLg1r6l0rx%2bPdVVjne0Si3YFUeens7NTJYAMafgGj2FjDiwfPIS\u002FEqAaqwVpQWGzwPnRm2YT9TkDgkabkEOtBiRenV\u002Ff7VlNpTN8B7ZHJpOp%2b8QfdnyTfBr1gB58dnCG4b2J8PL5vNIaqg0ODgrf4%2bPjMjY2po1gC4WC1gd6agWUhKZ7e3tSO80mimDiNRLp8F2wVajtfAYzMzOKZXR0VCnPGBt0Jyn4Bicy2NjYUJleXV1JsVhUnMbIdyXAAmVjgJGEXC4nIyMjCoQskxSCBhCJADDBUyQB1kjH72ZAPO67vtrf3y9DQ0MBPl2vOLCBBRsnTpIpiNjAxTw4qAdgM7a%2bOwFkDt2ZBKAT32bDMTaCNH22tbVJS0uLjpuVADXANU0Aa93eQfiqfatFndrjG2z4Nylib21t1Wb2piRgp09PtunJMGOcrKysKN3IPtSDDVBud3dXstnsv57%2bfwCpM8AVM99pucotMz09HXCinDC0R4bgwgcBHx4euptqXba3txUPp355ealXdvhq\u002Fl4cZvecY%2bdoSnUG1Qge5wQKAwC3ubmpNpzzTVJ4GyAJTi2svf%2b7GZy9ngC3VosgPt1eAdJjPUGbBJEEtuXl5XpisNEjQ5olIMyAxkfbPz3i6D27XhqvPbt6oJfJhKpv8mDMdcQm4TXYTE5mC1%2btYQm4se\u002F6auzt%2bgtMdubbGnauRLsCbS97tTaerEmmMSn2qgwzxrMs08i8FZyFhQXNOEyoUVQrM7RkDjpSgJAMhZGXI48lCiNrAMfeSAX68no7OTmhwH2rsaQugQVHZ7ePFsHh4WFdxzXX19enlR5pcANZwcM\u002FPmEmD7elpWWVKKzEhz3oWM8%2b4EK%2bzIMHNpl0PYIkOEAzAQAm7BnM6%2b\u002F%2b\u002Ft49Re90MfojIJ6mbMianZ0dBcdTmScsYEkkNCVwfkd7enoCUD0BYQk4HAHJJNi5uTkFjiwBjs7RO89x9iMpR0dHOsaOfxJA8EiCOdYQC0llHszM8TsOz5jh2QBa4tS%2bGWPjmqPxzZ%2bRsI0s8o3d1qksnJ15Emk3CX1tfb0GmARq1AzCf3QadRumrf6XqDXsNg5LMVyckZE9mkyettefmsdO\u002FLpe%2bPcAAAAASUVORK5CYII=' \u002F%3e%3c\u002Fsvg%3e\" width=\"516\" alt=\"image\" data-srcset=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-before-after.a879de3.875bb4ada36869cde6fbd3e2c688de0a.png 516w\" data-sizes=\"(max-width: 516px) 100vw, 516px\" data-src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-before-after.a879de3.875bb4ada36869cde6fbd3e2c688de0a.png\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fblog\u002Fassets\u002Fstatic\u002Floadcss-before-after.a879de3.875bb4ada36869cde6fbd3e2c688de0a.png\" width=\"516\" alt=\"image\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E이전에는 CSS가 로드되기를 기다리다가 1939번째 줄에서 멈췄지만, 이제는 페이지 끝에서 또 다른 인라인 스크립트가 발생하는 5281번째 줄까지 해석한 후 파서가 다시 블로킹된다.\u003C\u002Fp\u003E\n\u003Cp\u003E이 방법은 빠른 해결책이지만 최종 해결책이 될 수 있는 방법도 아니다. 순서를 바꾸고 preload\u002Fpolyfill 패턴을 버리는 것은 첫 번째 단계에 불과하다. 여기서 가장 큰 이점은 중요한 CSS를 외부 파일에서 참조하는 대신 인라인화 함으로써 얻을 수 있다(preload\u002Fpolyfill 패턴은 인라인 CSS와 함께 사용하기 위한 것이다). 이렇게 하면 스크립트 관련 문제를 완전히 무시할 수 있고 브라우저가 첫 번째 네트워크 요청에서 페이지를 렌더링하는 데 필요한 모든 CSS를 확보할 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E하지만 당장은 CSS를 로드하는 방식과 DOM 순서를 조금만 변경하면 성능을 크게 향상시킬 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E요약하자면\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Epreload\u002Fpolyfill 패턴과 함께 loadCSS를 사용하는 경우 대신 print 스타일시트 패턴을 사용하는 것이 좋다.\u003C\u002Fli\u003E\n\u003Cli\u003E정상적으로 로드하는 외부 스타일시트가 있는 경우(즉, 일반적인 스타일시트 링크로 로드하는 경우) 마크업에서 가능한 모든 인라인 스크립트를 그 위로 이동하는 것이 좋다.\u003C\u002Fli\u003E\n\u003Cli\u003E최대한 빠른 렌더링 시작을 위해 중요한 CSS를 인라인화 하는 것이 좋다.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n"}}]}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.11cf6a80.js" defer></script><script src="/blog/assets/js/page--src-templates-tag-vue.b2eea100.js" defer></script>
  </body>
</html>