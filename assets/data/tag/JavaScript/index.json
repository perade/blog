{"hash":"843e47f385d56c2b19388c4509fc534a1d06489c","data":{"tag":{"title":"JavaScript","belongsTo":{"edges":[{"node":{"title":"iOS에서 웹 대응 시 알아두면 좋은 몇 가지","path":"/ios-web-browser-tips/","date":"29. October 2020","timeToRead":1,"description":"웹 개발 시 iOS를 대응하는 도중 맞닥뜨릴 수 있는 몇 가지 상황에 대해 간단히 알아본다.","content":"<p>최근 회사 서비스의 특정 기능을 구현하면서 iOS를 대응하느라 애를 먹은 경험이 있다. 대체로 PC나 안드로이드에서의 브라우저에선 문제 없이 동작하는데 iOS에선 의도한 대로 동작하지 않는 경우였다. 향후에도 비슷한 상황을 맞닥뜨릴수 있기에 해당 이슈들을 해결하거나 우회한 방법을 기록으로 남겨놓고자 한다.</p>\n<hr>\n<h1 id=\"getusermedia-지원\"><a href=\"#getusermedia-%EC%A7%80%EC%9B%90\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>getUserMedia 지원</h1>\n<ul>\n<li><strong><em>TL;DR</em></strong> 사파리 외 브라우저에선 getUserMedia를 지원하지 않음</li>\n<li>iOS에 들어가는 타사 브라우저들은 iOS WebKit 엔진을 사용하여 구현해야 함</li>\n<li>애플이 해당 엔진에서 저 기능을 범용적으로 열어놓지 않고, 사파리에서만 허용해놓음\n</li>\n</ul>\n<h4 id=\"참고\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>참고</h4>\n<p><a href=\"https://stackoverflow.com/a/53093348\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Chrome and Firefox are not able to access iPhone Camera</a></p>\n<p><a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=752458\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">752458 - chromium - An open-source project to help move the web forward. - Monorail</a></p>\n<p><a href=\"https://bugs.webkit.org/show_bug.cgi?id=208667\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">208667 - getUserMedia does not work in WKWebView-based browsers like Chrome, Firefox.</a></p>\n<hr>\n<h1 id=\"img-태그-이슈\"><a href=\"#img-%ED%83%9C%EA%B7%B8-%EC%9D%B4%EC%8A%88\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>img 태그 이슈</h1>\n<ul>\n<li><strong><em>TL;DR</em></strong> 사파리에선 img 태그 안에 선언된 속성보다 큰 이미지를 바인딩하면 제대로 안나옴</li>\n</ul>\n<pre><code class=\"language-JavaScript\">// 동적으로 받아온 이미지의 크기\n.some-image {\n    width: 30px;\n    height: 30px;\n}\n\n&#x3C;img src=\"some-image\" width: \"10px\", height=\"10px\" />\n</code></pre>\n<p>이런 식으로 구현되어 있으면 새로고침해야 나오거나 아예 안나오는 등 제대로 동작하지 않으므로, 이미지를 동적으로 바인딩하는 경우 주의해야 함</p>\n<hr>\n<h1 id=\"이미지-포맷-변환\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%8F%AC%EB%A7%B7-%EB%B3%80%ED%99%98\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>이미지 포맷 변환</h1>\n<ul>\n<li><strong><em>TL;DR</em></strong> HEIC 이미지를 타사 브라우저나 앱으로 전송(파일 업로드 등)하면 자동으로 JPEG 포맷으로 변환되어 전송됨</li>\n<li>iOS 11 에 HEIC 포맷의 이미지가 추가되었는데, 다른 플랫폼과 서비스에서 해당 이미지를 읽어들이지 못하는 오류가 있었음</li>\n<li>하여 애플에서 해당 포맷은 전송 시 자동으로 JPEG으로 변환하도록 수정함</li>\n</ul>\n<h4 id=\"참고-1\"><a href=\"#%EC%B0%B8%EA%B3%A0-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>참고</h4>\n<p><a href=\"https://news.ycombinator.com/item?id=23260987\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">I thought iOS was supposed to convert HEIC images to JPEG automatically behind-t... | Hacker News</a></p>\n"}},{"node":{"title":"toFixed 반올림 오류","path":"/js-to-fixed-problem/","date":"21. August 2020","timeToRead":3,"description":"toFixed 사용 시 간혹 발생하는 반올림 오류 현상을 확인하고, 간단한 해결책을 알아본다.","content":"<p>최근 사내 QA 팀에서 확인 요청이 들어온 이슈 하나가 있었다. 웹 서비스 내 각 항목 별 보유자산의 합과 실제 총 보유자산이 소수점 단위에서 조금씩 차이를 보이는 경우가 한 번씩 있다는 것이다.</p>\n<p>입사 후 해당 로직을 깊게 들여다본 적이 없었기에 이슈가 들어온 김에 찬찬히 훑어 보았는데, 계산 로직 중 <strong>toFixed</strong> 를 사용하는 부분이 있었다. 예로부터 전설처럼(?) 전해 내려오는 JavaScript의 이상 행동 중 하나로 종종 언급되는 녀석이기에 확인을 해봤더니 역시나 이놈이 실행하는 반올림에 문제가 있었다.</p>\n<p>실무 중 이런 경우를 직접 겪어본게 처음이기도 하고, 후에 비슷한 상황을 겪더라도 당황하지 않도록 toFixed의 문제는 무엇이고, 어떻게 해결할 수 있는지 정리해보고자 한다.</p>\n<hr>\n<h1 id=\"무엇이-문제인가\"><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%B4-%EB%AC%B8%EC%A0%9C%EC%9D%B8%EA%B0%80\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>무엇이 문제인가</h1>\n<p>아래 코드는 실제로 toFixed를 사용함으로써 문제가 발생하는 경우이다. 큰 틀에서 보자면 위의 실무에서 겪은 이슈가 이와 유사한 과정으로 발생하였다.</p>\n<div class=\"gist-embed\">\n    <div id=\"gist107181232\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-example-tofixed-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JavaScript\" data-tagsearch-path=\"example-toFixed.js\">\n        <tr>\n          <td id=\"file-example-tofixed-js-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-example-tofixed-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>numA</span> <span class=pl-c1>=</span> <span class=pl-c1>1.2345</span><span class=pl-kos>.</span><span class=pl-en>toFixed</span><span class=pl-kos>(</span><span class=pl-c1>3</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-example-tofixed-js-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>numB</span> <span class=pl-c1>=</span> <span class=pl-c1>2.2345</span><span class=pl-kos>.</span><span class=pl-en>toFixed</span><span class=pl-kos>(</span><span class=pl-c1>3</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-example-tofixed-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>sum</span> <span class=pl-c1>=</span> <span class=pl-s1>numA</span> <span class=pl-c1>+</span> <span class=pl-s1>numB</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-example-tofixed-js-LC4\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-example-tofixed-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 1.234</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-example-tofixed-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>numA</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-example-tofixed-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-example-tofixed-js-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 2.235</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L9\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-example-tofixed-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>numB</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L10\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-example-tofixed-js-LC10\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L11\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-example-tofixed-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 3.469</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-tofixed-js-L12\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-example-tofixed-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>sum</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/perade/8fdfc2889061d072e9581b52a33cd881/raw/66bc72f536fc3bad72847bdf19c9f0e1dd40c6fc/example-toFixed.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/perade/8fdfc2889061d072e9581b52a33cd881#file-example-tofixed-js\">\n          example-toFixed.js\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div>\n</div>\n<p>사용자는 소수점 3자리까지 반올림 후 이를 더한 값인 3.47을 원했으나, 1.2345.toFixed(3)이 1.235가 아닌 1.234를 반환하여 결국 3.469라는 결과를 갖게 되었다. 왜 1.2345를 반올림했는데 1.234가 나온 것일까?</p>\n<p>JavaScript의 숫자는 IEEE 754에서 정의한 스펙에 따라 그 형태에 상관없이 항상 <strong>double precision floating point, 즉 64 bit 부동 소수점</strong>으로 저장된다. 때문에 분모가 2의 거듭제곱이 아닌 수는 정확한 값이 아닌 근사치로 표현된다. 실제로 예제에서 사용한 1.2345와 2.2345를 지수 형태로 출력해 보면 아래와 같다.</p>\n<div class=\"gist-embed\">\n    <div id=\"gist107181620\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-example-toexponential-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JavaScript\" data-tagsearch-path=\"example-toExponential.js\">\n        <tr>\n          <td id=\"file-example-toexponential-js-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-example-toexponential-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// &quot;1.23449999999999993072e+0&quot;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-toexponential-js-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-example-toexponential-js-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-c1>1.2345</span><span class=pl-kos>.</span><span class=pl-en>toExponential</span><span class=pl-kos>(</span><span class=pl-c1>20</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-toexponential-js-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-example-toexponential-js-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-toexponential-js-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-example-toexponential-js-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// &quot;2.23450000000000015277e+0&quot;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-toexponential-js-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-example-toexponential-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-c1>2.2345</span><span class=pl-kos>.</span><span class=pl-en>toExponential</span><span class=pl-kos>(</span><span class=pl-c1>20</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/perade/60028f3c18726c96a97e6935da360e5d/raw/c1fecff0cd6fe0f8673e86654ea9e512c54d44fc/example-toExponential.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/perade/60028f3c18726c96a97e6935da360e5d#file-example-toexponential-js\">\n          example-toExponential.js\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div>\n</div>\n<p>toFixed로 반올림을 시도했을 때 1.2345는 실제로는 1.234에 더 가까운 근사치이고, 2.2345는 실제로는 2.235에 더 가까운 근사치이기 때문에 예제와 같은 결과가 나온다는 것을 알 수 있다.</p>\n<hr>\n<h1 id=\"해결-방법은-무엇인가\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>해결 방법은 무엇인가</h1>\n<p>널리 알려진 덧셈 이슈(0.1 + 0.2)의 해결 방법처럼 정수로 반올림 후 다시 원하는만큼 자리수를 조정하는 형태로 해결할 수 있다. 하는 김에 덧셈 이슈도 예제에 한해 해결 가능한 간단한 함수를 만들어 보았다. 아래 코드와 함께 짧은 정리글을 마친다.</p>\n<div class=\"gist-embed\">\n    <div id=\"gist107182017\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-example-alternative-tofixed-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JavaScript\" data-tagsearch-path=\"example-alternative-toFixed.js\">\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>function</span> <span class=pl-en>getRound</span> <span class=pl-kos>(</span><span class=pl-s1>value</span><span class=pl-kos>,</span> <span class=pl-s1>digit</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>const</span> <span class=pl-s1>digits</span> <span class=pl-c1>=</span> <span class=pl-s1>digit</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>20</span> ? <span class=pl-c1>20</span> : <span class=pl-s1>digit</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC3\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return</span>  <span class=pl-v>Number</span><span class=pl-kos>(</span><span class=pl-v>Math</span><span class=pl-kos>.</span><span class=pl-en>round</span><span class=pl-kos>(</span><span class=pl-s1>value</span> <span class=pl-c1>+</span> <span class=pl-s>&#39;e&#39;</span> <span class=pl-c1>+</span> <span class=pl-s1>digits</span><span class=pl-kos>)</span> <span class=pl-c1>+</span> <span class=pl-s>&#39;e-&#39;</span> <span class=pl-c1>+</span> <span class=pl-s1>digits</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>function</span> <span class=pl-en>getSum</span> <span class=pl-kos>(</span><span class=pl-s1>a</span><span class=pl-kos>,</span> <span class=pl-s1>b</span><span class=pl-kos>,</span> <span class=pl-s1>digit</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC7\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>const</span> <span class=pl-s1>digits</span> <span class=pl-c1>=</span> <span class=pl-c1>1</span> <span class=pl-c1>+</span> <span class=pl-s>&#39;e&#39;</span> <span class=pl-c1>+</span> <span class=pl-s1>digit</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>return</span> <span class=pl-kos>(</span><span class=pl-kos>(</span><span class=pl-s1>a</span> <span class=pl-c1>*</span> <span class=pl-s1>digits</span><span class=pl-kos>)</span> <span class=pl-c1>+</span> <span class=pl-kos>(</span><span class=pl-s1>b</span> <span class=pl-c1>*</span> <span class=pl-s1>digits</span><span class=pl-kos>)</span><span class=pl-kos>)</span> <span class=pl-c1>/</span> <span class=pl-s1>digits</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L9\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L10\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC10\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L11\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-c1>DIGIT</span> <span class=pl-c1>=</span> <span class=pl-c1>3</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L12\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>numA</span> <span class=pl-c1>=</span> <span class=pl-en>getRound</span><span class=pl-kos>(</span><span class=pl-c1>1.2345</span><span class=pl-kos>,</span> <span class=pl-c1>DIGIT</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L13\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>numB</span> <span class=pl-c1>=</span> <span class=pl-en>getRound</span><span class=pl-kos>(</span><span class=pl-c1>2.2345</span><span class=pl-kos>,</span> <span class=pl-c1>DIGIT</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L14\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>sum</span> <span class=pl-c1>=</span> <span class=pl-en>getSum</span><span class=pl-kos>(</span><span class=pl-s1>numA</span><span class=pl-kos>,</span> <span class=pl-s1>numB</span><span class=pl-kos>,</span> <span class=pl-c1>DIGIT</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L15\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC15\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L16\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 1.235</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L17\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"17\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>numA</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L18\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"18\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC18\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L19\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"19\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 2.235</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L20\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"20\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>numB</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L21\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"21\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC21\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L22\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"22\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 3.47</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-alternative-tofixed-js-L23\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"23\"></td>\n          <td id=\"file-example-alternative-tofixed-js-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s1>sum</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/perade/70fb8f6fa1dd672534290e60ac6ecfa3/raw/a1ac8344842098f8ffdd7e8534ff7f9ce1c50768/example-alternative-toFixed.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/perade/70fb8f6fa1dd672534290e60ac6ecfa3#file-example-alternative-tofixed-js\">\n          example-alternative-toFixed.js\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div>\n</div>\n<hr>\n<h3 id=\"references\"><a href=\"#references\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>References</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://stackoverflow.com/questions/588004/is-floating-point-math-broken</a></li>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed</a></li>\n</ul>\n"}},{"node":{"title":"[번역] await vs return vs return await","path":"/await-vs-return-vs-return-await/","date":"4. March 2020","timeToRead":2,"description":"async 함수를 작성할 때 사용하는 await, return, return await 각각의 차이점을 알아본다.","content":"<blockquote>\n<p>Jake Archibald의 <a href=\"https://jakearchibald.com/2017/await-vs-return-vs-return-await/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">await vs return vs return await</a> 번역글입니다. 굳이 이 글이 아니더라도 모든 번역글은 역자의 의도와 상관없이 원문의 내용과 다르게 전달될 수 있으니 원문도 같이 보시는 걸 권해드립니다.</p>\n</blockquote>\n<p>async 함수를 작성할 때 사용하는 <code>await</code>, <code>return</code>, <code>return await</code>의 차이점을 알고, 올바른 선택을 하는 것이 중요하다. 아래 예제를 보자.</p>\n<pre><code>async function waitAndMaybeReject() {\n  // Wait one second\n  await new Promise(r => setTimeout(r, 1000));\n\n  // Toss a coin\n  const isHeads = Boolean(Math.round(Math.random()));\n\n  if (isHeads) return 'yay';\n  throw Error('Boo!');\n}\n</code></pre>\n<p>이 함수는 반반의 확률로 Fulfilled(이행) 상태가 되어 'yay'를 던져주거나 Rejected(실패) 상태가 되어 에러를 던지는 promise를 반환한다. 이걸 몇 가지 다른 방식으로 사용해보자.</p>\n<hr>\n<h2 id=\"just-calling\"><a href=\"#just-calling\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Just calling</h2>\n<pre><code>async function foo() {\n  try {\n    waitAndMaybeReject();\n  }\n  catch (e) {\n    return 'caught';\n  }\n}\n</code></pre>\n<p>위와 같이 <code>foo</code>를 호출하면 항상 <strong>undefined인 Fulfilled 상태의 promise를 곧바로 리턴</strong>할 것이다. <code>waitAndMaybeReject()</code>를 await 하거나 리턴하지 않았기 때문이다.</p>\n<h2 id=\"awaiting\"><a href=\"#awaiting\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Awaiting</h2>\n<pre><code>async function foo() {\n  try {\n    await waitAndMaybeReject();\n  }\n  catch (e) {\n    return 'caught';\n  }\n}\n</code></pre>\n<p><code>foo</code>를 호출하면 이번엔 <strong>항상 1초를 기다린 뒤 undefined나 'caught'인 Fulfilled 상태의 promise</strong>를 리턴할 것이다. 위 코드에서 <code>waitAndMaybeReject()</code>를 await 하기 때문에 해당 함수가 Rejected 상태의 promise를 리턴하면 catch 블록이 실행되어 'caught'를 리턴하지만, Fulfilled 상태의 promise를 리턴하면 여전히 await만 할 뿐 아무 동작을 하지 않기 때문에 yay를 얻을 수 없다.</p>\n<h2 id=\"returning\"><a href=\"#returning\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Returning</h2>\n<pre><code>async function foo() {\n  try {\n    return waitAndMaybeReject();\n  }\n  catch (e) {\n    return 'caught';\n  }\n}\n</code></pre>\n<p><code>foo</code>를 호출하면 <strong>항상 1초를 기다린 뒤, 'yay'를 가진 Fulfilled 상태나 Error('Boo!')를 throw하는 Rejected 상태의 promise</strong>를 리턴할 것이다. <code>waitAndMaybeReject()</code>를 await 하지 않고 바로 리턴하기 때문에 catch 블록은 절대 실행되지 않는다.</p>\n<h2 id=\"return-awaiting\"><a href=\"#return-awaiting\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Return-awaiting</h2>\n<pre><code>async function foo() {\n  try {\n    return await waitAndMaybeReject();\n  }\n  catch (e) {\n    return 'caught';\n  }\n}\n</code></pre>\n<p><code>foo</code>를 호출하면 <strong>항상 1초를 기다린 뒤, 'yay'나 'caught'를 가진 Fulfilled 상태의 promise</strong>를 리턴할 것이다. <code>waitAndMaybeReject()</code>를 await 했기 때문에 해당 함수가 Rejected 상태의 promise를 리턴하면 catch 블록이 실행되어 'caught'를 리턴하고, Fulfilled 상태이면 'yay'를 리턴한다.</p>\n<hr>\n<p>위의 내용들이 혼란스러우면 아래와 같이 두 단계로 생각하면 좀 더 쉬울 것이다.</p>\n<pre><code>async function foo() {\n  try {\n    // waitAndMaybeReject()의 결과가 정해질 때까지 기다린 후,\n    // 그 값을 fulfilledValue에 할당\n    const fulfilledValue = await waitAndMaybeReject();\n\n    // 그리고 fulfilledValue를 리턴\n    return fulfilledValue;\n  }\n  catch (e) {\n    // 만약 waitAndMaybeReject()가 Rejected 상태면\n    // catch 블록이 실행되기 때문에 'caught'를 리턴\n    return 'caught';\n  }\n}\n</code></pre>\n<p><a href=\"https://github.com/eslint/eslint/blob/master/docs/rules/no-return-await.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Note</a>: async 함수의 리턴값은 항상 Promise.resolve로 wrapped 되어 있기 때문에 return await는 실효성이 없다. 다만 try/catch 구문에서는 다른 Promise 함수의 오류를 catch 하기 위해 사용될 수 있다.</p>\n"}},{"node":{"title":"MutationObserver - DOM 변경 감지","path":"/mutation-observer/","date":"4. February 2020","timeToRead":2,"description":"Web API 중 하나인 MutationObserver의 기능과 용도를 간단한 예제 코드와 함께 알아본다.","content":"<p>예전에 이미지 업로드를 구현할 일이 있었는데, 이미지가 10장을 초과하면 최대 10장까지라는 토스트 메시지를 표시하는 것과 이미지를 1024 이하로 resizing 해야 하는 요구사항이 있었다.</p>\n<p>토스트를 호출하는 로직과 img와 canvas를 활용한 이미지 resizing 로직을 구현 후 테스트를 진행했는데, 불필요한 렌더링이 발생하여 페이지가 깜빡거리거나 토스트가 버벅이며 올라오는 등의 현상이 있었다.</p>\n<p>이는 별개의 두 로직이 DOM에 동시에 접근하다보니 생긴 현상이었다. 문제 해결을 위해 조사하던 중 MutationObserver 라는 Web API가 있다는 것을 알게 됐다.</p>\n<hr>\n<h1 id=\"mutationobserver\"><a href=\"#mutationobserver\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>MutationObserver</h1>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/API/MutationObserver\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MutationObserver</a>는 DOM 트리의 변경을 감시하는 기능을 제공한다. 아래는 MDN에서 제공하는 예제 코드이다.</p>\n<div class=\"gist-embed\">\n    <div id=\"gist101533940\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-example-mutationobserver-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-javascript  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"JavaScript\" data-tagsearch-path=\"example-MutationObserver.js\">\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-example-mutationobserver-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>/** https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-example-mutationobserver-js-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-example-mutationobserver-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 감시할 대상 Node</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-example-mutationobserver-js-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>targetNode</span> <span class=pl-c1>=</span> <span class=pl-smi>document</span><span class=pl-kos>.</span><span class=pl-en>getElementById</span><span class=pl-kos>(</span><span class=pl-s>&#39;some-id&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-example-mutationobserver-js-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-example-mutationobserver-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 감시자 설정</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-example-mutationobserver-js-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>config</span> <span class=pl-c1>=</span> <span class=pl-kos>{</span> <span class=pl-c1>attributes</span>: <span class=pl-c1>true</span><span class=pl-kos>,</span> <span class=pl-c1>childList</span>: <span class=pl-c1>true</span><span class=pl-kos>,</span> <span class=pl-c1>subtree</span>: <span class=pl-c1>true</span> <span class=pl-kos>}</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-example-mutationobserver-js-LC8\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L9\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-example-mutationobserver-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 변경이 감지되었을 때 실행할 Callback function</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L10\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-example-mutationobserver-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-en>callback</span> <span class=pl-c1>=</span> <span class=pl-k>function</span><span class=pl-kos>(</span><span class=pl-s1>mutationsList</span><span class=pl-kos>,</span> <span class=pl-s1>observer</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L11\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-example-mutationobserver-js-LC11\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-k>for</span><span class=pl-kos>(</span><span class=pl-k>let</span> <span class=pl-s1>mutation</span> <span class=pl-k>of</span> <span class=pl-s1>mutationsList</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L12\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-example-mutationobserver-js-LC12\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>if</span> <span class=pl-kos>(</span><span class=pl-s1>mutation</span><span class=pl-kos>.</span><span class=pl-c1>type</span> <span class=pl-c1>===</span> <span class=pl-s>&#39;childList&#39;</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L13\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-example-mutationobserver-js-LC13\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s>&#39;A child node has been added or removed.&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L14\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-example-mutationobserver-js-LC14\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L15\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-example-mutationobserver-js-LC15\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-k>else</span> <span class=pl-k>if</span> <span class=pl-kos>(</span><span class=pl-s1>mutation</span><span class=pl-kos>.</span><span class=pl-c1>type</span> <span class=pl-c1>===</span> <span class=pl-s>&#39;attributes&#39;</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L16\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-example-mutationobserver-js-LC16\" class=\"blob-code blob-code-inner js-file-line\">      <span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-s>&#39;The &#39;</span> <span class=pl-c1>+</span> <span class=pl-s1>mutation</span><span class=pl-kos>.</span><span class=pl-c1>attributeName</span> <span class=pl-c1>+</span> <span class=pl-s>&#39; attribute was modified.&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L17\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"17\"></td>\n          <td id=\"file-example-mutationobserver-js-LC17\" class=\"blob-code blob-code-inner js-file-line\">    <span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L18\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"18\"></td>\n          <td id=\"file-example-mutationobserver-js-LC18\" class=\"blob-code blob-code-inner js-file-line\">  <span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L19\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"19\"></td>\n          <td id=\"file-example-mutationobserver-js-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L20\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"20\"></td>\n          <td id=\"file-example-mutationobserver-js-LC20\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L21\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"21\"></td>\n          <td id=\"file-example-mutationobserver-js-LC21\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 감시자 인스턴스 생성</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L22\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"22\"></td>\n          <td id=\"file-example-mutationobserver-js-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>const</span> <span class=pl-s1>observer</span> <span class=pl-c1>=</span> <span class=pl-k>new</span> <span class=pl-v>MutationObserver</span><span class=pl-kos>(</span><span class=pl-en>callback</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L23\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"23\"></td>\n          <td id=\"file-example-mutationobserver-js-LC23\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L24\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"24\"></td>\n          <td id=\"file-example-mutationobserver-js-LC24\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 감시할 대상 Node를 전달하여 감시 시작</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L25\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"25\"></td>\n          <td id=\"file-example-mutationobserver-js-LC25\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>observer</span><span class=pl-kos>.</span><span class=pl-en>observe</span><span class=pl-kos>(</span><span class=pl-s1>targetNode</span><span class=pl-kos>,</span> <span class=pl-s1>config</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L26\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"26\"></td>\n          <td id=\"file-example-mutationobserver-js-LC26\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L27\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"27\"></td>\n          <td id=\"file-example-mutationobserver-js-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>// 감시 종료</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-example-mutationobserver-js-L28\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"28\"></td>\n          <td id=\"file-example-mutationobserver-js-LC28\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>observer</span><span class=pl-kos>.</span><span class=pl-en>disconnect</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/perade/def10d403bb2cbc16313357934a01ca3/raw/5f5f05f631faa2e847e9370734138d7db0630052/example-MutationObserver.js\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/perade/def10d403bb2cbc16313357934a01ca3#file-example-mutationobserver-js\">\n          example-MutationObserver.js\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div>\n</div>\n<p>코드를 보면 사용이 굉장히 간단한 것을 확인할 수 있다. 큰 흐름은 아래와 같다.</p>\n<ul>\n<li>감시할 대상을 정함</li>\n<li>감시자를 생성</li>\n<li>필요에 따라 감시를 ON / OFF</li>\n</ul>\n<p>특정 DOM Node를 observe 함수를 실행하여 감시하고 있다가 해당 Node가 변경되면 Callback 함수를 실행하여 원하는 동작을 취할 수 있다. observe 함수 실행 시 옵션을 같이 전달할 수 있는데, 옵션 이름을 보면 해당 옵션이 어떤 목적인지 쉽게 유추할 수 있다. (attributes: true 는 id, class 등 해당 Node의 속성 변경을 감시, childList: true 는 해당 Node의 자식들이 변경되는지 감시 등)</p>\n<hr>\n<p>다시 예전으로 돌아가서, 필자는 당시 MutationObserver를 활용하여 이미지 resizing을 위한 canvas 엘리먼트가 생성되었음을 확인한 후 필요에 따라 토스트를 호출하는 식으로 로직을 수정하여 문제를 해결하였다.</p>\n<p>이처럼 DOM 변경에 따라 실행되어야 하는 동작이 있을 경우 MutationObserver를 유용하게 활용할 수 있다. 또한 Vue.js나 React.js와 같은 SPA 도구들에 의존하는 경우 가상 DOM을 거치기 때문에 애플리케이션의 규모나 복잡도가 높으면 각 컴포넌트들의 실제 DOM 반영 시점을 알기 어려운 경우가 종종 있다. 이러한 경우 MutationObserver를 활용한 디버깅용 Wrapper를 만들어 필요에 따라 활용할 수도 있다.</p>\n<hr>\n<h3 id=\"references\"><a href=\"#references\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>References</h3>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/API/MutationObserver\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developer.mozilla.org/ko/docs/Web/API/MutationObserver</a></li>\n</ul>\n"}}]}}},"context":{}}